---
title: "Replication 2"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# Install Required Packages
rm(list = ls())
library(ri)
library(RItools)
library(car)
library(xtable)
library(effects)
library(RColorBrewer)

# Set for non-scientific notaion output
options(scipen = 999)

# Load data

dat.all = read.csv('./csvData/pnas_data.csv')
dat.t1 = read.csv('./csvData/t1_data.csv')
dat.all.prime = read.csv('./csvData/prime_data.csv')

# Data loading for faces graphic
conf.dat = read.csv('./csvData/confederate_face_data.csv')
hisp.dat = read.csv('./csvData/hispanic_face_data.csv')
white.dat = read.csv('./csvData/white_face_data.csv')

```


```{r table2, echo = FALSE}

# Table 2

# BALANCE CHECK: Check to see whether there are confounding varaibles 
#   relating to which station is being sampled
# xBalance function calculates std mean dif. along each covariate, given
#   covariates, a treatment variable and a stratifying factor (factor which
#   can seperate data into subgroups)
# Report indicates which results we would like to see
# Strata refers to the set of the population which is being sampled. In this 
#   case, it is the list of train stations

out.balance.test = xBalance(fmla = treatment ~ liberal+republican+obama.disapprove+ride.everyday+voted.2010+romney.voter+Hispanics.x+age+residency.new+hispanic.new+college+income.new+male+white, data = dat.all, report = c("std.diffs","z.scores","adj.means","chisquare.test"), strata = factor(dat.all$station))

print(out.balance.test)
xtable.out.balance.text = xtable(out.balance.test)

```
